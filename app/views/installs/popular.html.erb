<h2>Popular Apps</h2>

<div class="yui-gb">
  <div class="yui-u first">
    <ul class="installs">
      <% @installs[0..4].each_with_index do |install, index| %>
        <% app = install.app %>
        <% last = (index % 5 == 4) ? ' last' : '' %>
          <li class="install<%= last %>">
            <%= icon(app) %>
            <div class="heading">
              <%= heading(app) %>
              <%= stars(app.average_rating) %>
            </div>
            <div class="details">
              <p>
                purchased by <%= pluralize(install['number_of_installs'], 'user') %>
              </p>
            </div>
          </li>
      <% end %>
    </ul>
  </div>
  <div class="yui-u">
    <ul class="installs">
      <% @installs[5..9].to_a.each_with_index do |install, index| %>
        <% app = install.app %>
        <% last = (index % 5 == 4) ? ' last' : '' %>
          <li class="install<%= last %>">
            <%= icon(app) %>
            <div class="heading">
              <%= heading(app) %>
              <%= stars(app.average_rating) %>
            </div>
            <div class="details">
              <p>
                purchased by <%= pluralize(install['number_of_installs'], 'user') %>
              </p>
            </div>
          </li>
      <% end %>
    </ul>
  </div>
  <div class="yui-u">
    <ul class="installs">
      <% @installs[10..14].to_a.each_with_index do |install, index| %>
        <% app = install.app %>
        <% last = (index % 5 == 4) ? ' last' : '' %>
          <li class="install<%= last %>">
            <%= icon(app) %>
            <div class="heading">
              <%= heading(app) %>
              <%= stars(app.average_rating) %>
            </div>
            <div class="details">
              <p>
                purchased by <%= pluralize(install['number_of_installs'], 'user') %>
              </p>
            </div>
          </li>
      <% end %>
    </ul>
  </div>
</div>

<%= will_paginate @installs %>
